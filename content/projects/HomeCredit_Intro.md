+++
title = '🪪 HOME CREDIT #1:Intro'
date = 2026-01-04T11:00:50+09:00
draft = true
categories = []
+++

캐글 대회 링크 : [https://www.kaggle.com/competitions/home-credit-default-risk](https://www.kaggle.com/competitions/home-credit-default-risk)

## 데이터 확인
대회 공식 페이지에서 확인한 데이터들의 관계도이다. 
<p align="center">
  <a href="/images/projects/home_credit/home_credit_erd.png" data-lightbox="image-set">
    <img src="/images/projects/home_credit/home_credit_erd.png" alt="Your Alt Text" >
  </a>
</p>

이번 실습에서는 `application.csv` 만 사용했다. 추후에 SK_ID_CURR을 기준으로 데이터들을 합쳐볼 예정이다. 


## 느낀점
과거에 기업부도 예측 프로젝트를 진행했을 때도 그렇고 도메인의 성격이 매우 중요한 과제에서 가장 핵심은 데이터 셋 구축까지인 것 같다.  
데이터의 품질이 모델의 성능을 결정하는 만큼 수집된 데이터들을 어떤 종류인지, 어떻게 분류하고 어떻게 전처리할 것인지가 나의 영역이었다. 
모델링 자체는 이미 높은 성능의 라이브러리들이 담당하고 있으니, 나의 역할은 어떤 방법으로 이 모델링을 수행할 것인지를 정하는 것이었는데 그걸 고민하는 과정이 머리아프면서도 재밌었다. 


## 주요 개념
신용평가는 결국 해당 고객에게 대출을 해줄지 말지 즉, 0이냐 1이냐의 분류 문제이다.  
분류 모델을 쓴다고 할 때 수치형 변수들을 처리하는 방법에 WoE와 IV가 있는데 각각 학습해보자 
### WoE (Weight of Evidence)
> 특정 독립 변수의 범주(Bin)가 종속 변수(Good/Bad)를 얼마나 잘 설명하는지를 수치화한 값.  
"이 고객이 특정 집단에 속해 있다는 사실이 부도 확률을 높이는가, 낮추는가?"


$$
WoE_{i} = ln(\frac{Distr Good_{i}}{Distr Bad_{i}}) = ln(\frac{G_i / G_{total}}{B_i/B_{total}})
$$

Gi : i번째 구간의 정상 고객 수  
Bi : i번째 구간의 부도(연체 고객 수)

주요 특징
- 비선형성의 선형화 : 비선형적인 관계를 가진 변수도 WoE로 변환하면 로지스틱 회귀 모델에서 선형적인 관계를 갖게 되어 모델 성능이 안정화 됨. 
- Outlier 처리 : 변수를 구간화하기 때문에 극단적인 값의 영향력이 줄어듦
- WoE > 0 : 정상 고객 비중이 더 높음 (상대적으로 안전한 집단)
- WoE < 0 : 부도 고객 비중이 더 높음 (상대적으로 위험한 집단)

여기서 인상 깊은건 첫번째 특징인 비선형성의 선형화이다.   
예를 들어 나이 데이터가 있다고 했을 때 소득이 불안정한 20대와 소득이 없는 60대의 경우 신용점수가 낮고 30~40대의 경우 소득이 안정적이라 신용점수가 높을 것이다.  
이 경우 나이와 신용 점수는 비선형관계가 된다.  
하지만 WoE를 사용하면 위험비중이 높은 구간부터 내림차순으로 구간을 정렬하게 되므로 나이 구간과 신용 점수는 선형관계로 나타낼 수 있다. 

### IV (Information Value)
> 해당 독립 변수가 종속 변수를 얼마나 잘 예측(변별)할 수 있는지를 나타내는 지표. 변수 선택 단계에서 핵심적인 기준 

$$
IV = \sum_{i=1}^{n}(DistrGood_i - DistrBad_i) * WoE_i
$$
 
모든 구간(n)의 WoE값을 활용하여 합산함

주요 특징

|IV 값 범위|변별력 수준 (Predictive Power)|
|---|---|
|< 0.02|거의 없음 (Useless)|
|0.02 ~ 0.1|낮음 (Weak)|
|0.1 ~ 0.3|보통 (Medium)|
|0.3 ~ 0.5|높음 (Strong)|
|> 0.5|매우 높음 (주의 필요)|

IV가 0.5보다 너무 높으면 'Target Leakage(미래의 정보가 변수에 포함됨)'를 의심해봐야 함. (현재 연체 여부로 미래 부도를 예측하는 격일 수 있음)

요약하면,  
**WoE**는 "특정 구간의 위험도가 어떠한가?"  
**IV**는 "이 변수 자체가 모델에 쓸모 있는가?"   
를 판별해준다고 보면 된다. 

### OptBinning
신용 평가의 경우 다른 도메인메 비해 모델의 성능 만큼이나 **모델의 설명 가능성**이 중요하다.  
신용평가의 모델 설명력을 높여주기 위해 이번 실습에서는 OptBinning 라이브러리를 사용할 예정이다. 

라이브러리 이름대로 최적의 데이터 구간을 찾아주는데, 구체적으로는 IV를 극대화하거나 특정 목적 함수를 최적화하는 구간을 말한다. 

또한 단조성 제약을 통해 변수와 부도율 간의 관계가 상식적인 방향으로 흐르도록 강제할 수 있다는 점에서 유용하다.  

더불어 스코어카드 생성 기능도 내장되어 있어 별도의 기능 구현이 필요가 없다는 점에서 간편하다. 

라이브러리 공식 문서 : [https://gnpalencia.org/optbinning/](https://gnpalencia.org/optbinning/)
